var Config=function(){function e(){}var t=(__define,e);t.prototype;return e.DEBUG=!0,e.starCount=0,e.pass=1,e}();egret.registerClass(Config,"Config");var EndGame=function(e){function t(){e.call(this),this.jieshu=[],egret.Capabilities.isMobile&&window.wshare.gameShareWX(window.tmy[0],window.w_gameInfo.img,function(e){window.WXSDK().init(e.link,e.img,e.desc,e.title)}),this.createView()}__extends(t,e);var s=(__define,t),i=s.prototype;return i.createView=function(){switch(window.w_updateUserIntegralA(window.w_userInfo,window.w_gameInfo.gameId,window.tmy[0]),this.fenshubg=new egret.Bitmap(RES.getRes("score_bg_png")),this.fenshubg.width=465,this.fenshubg.height=300,this.fenshubg.x=87.5,this.fenshubg.y=70,this.addChild(this.fenshubg),this.sharebtn=new egret.Bitmap(RES.getRes("btn_share_png")),this.sharebtn.width=179,this.sharebtn.height=66,this.sharebtn.x=400,this.sharebtn.y=70,this.sharebtn.touchEnabled=!0,this.sharebtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.share,this),this.addChild(this.sharebtn),this.fenshu=new egret.TextField,this.fenshu.textAlign=egret.HorizontalAlign.CENTER,this.fenshu.verticalAlign=egret.VerticalAlign.MIDDLE,this.fenshu.textColor=16774967,window.gameType){case 0:this.fenshu.text=window.tmy[0]+"分",this.fenshu.size=50;break;case 1:this.fenshu.text="您已经闯过第"+window.tmy[0]+"关",this.fenshu.size=40}this.fenshu.width=395,this.fenshu.height=100,this.fenshu.x=125,this.fenshu.y=220,this.addChild(this.fenshu),this.gxnggdl=new egret.TextField,this.gxnggdl.textAlign=egret.HorizontalAlign.CENTER,this.gxnggdl.verticalAlign=egret.VerticalAlign.MIDDLE,this.gxnggdl.textColor=16774967,this.gxnggdl.size=30,this.gxnggdl.text="恭喜你刚刚获得了:",this.gxnggdl.width=395,this.gxnggdl.height=40,this.gxnggdl.x=125,this.gxnggdl.y=370,this.addChild(this.gxnggdl),this.kaixinbg=new egret.Bitmap(RES.getRes("btn_kx_png")),this.kaixinbg.width=256,this.kaixinbg.height=94,this.kaixinbg.x=192,this.kaixinbg.y=420,this.addChild(this.kaixinbg),this.wbsbg=new egret.Bitmap(RES.getRes("btn_wbs_png")),this.wbsbg.width=256,this.wbsbg.height=94,this.wbsbg.x=192,this.wbsbg.y=520,this.addChild(this.wbsbg),window.bl?(this.denglubtn=new egret.Bitmap(RES.getRes("ydl_png")),this.denglubtn.width=262,this.denglubtn.height=149,this.denglubtn.x=189,this.denglubtn.y=630):(this.denglubtn=new egret.Bitmap(RES.getRes("wdl_png")),this.denglubtn.width=400,this.denglubtn.height=158,this.denglubtn.x=110,this.denglubtn.y=630),this.denglubtn.touchEnabled=!0,this.addChild(this.denglubtn),this.denglubtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.isLogin,this),this.zsycbtn=new egret.Bitmap(RES.getRes("btn_again_png")),this.zsycbtn.width=243,this.zsycbtn.height=73,this.zsycbtn.x=50,this.zsycbtn.y=800,this.zsycbtn.touchEnabled=!0,this.addChild(this.zsycbtn),this.zsycbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.againGame,this),this.morebtn=new egret.Bitmap(RES.getRes("btn_more_png")),this.morebtn.width=243,this.morebtn.height=73,this.morebtn.x=350,this.morebtn.y=800,this.morebtn.touchEnabled=!0,this.addChild(this.morebtn),this.morebtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.moreGame,this),this.glbtn=new egret.Bitmap(RES.getRes("help_png")),this.glbtn.width=106,this.glbtn.height=77,this.glbtn.x=510,this.glbtn.y=670,this.glbtn.touchEnabled=!0,this.addChild(this.glbtn),this.glbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.glzs,this),this.kxz=new egret.TextField,this.kxz.textAlign=egret.HorizontalAlign.CENTER,this.kxz.verticalAlign=egret.VerticalAlign.MIDDLE,this.kxz.textColor=16774967,this.kxz.size=30,this.kxz.text=window.tmy[0]+"",this.kxz.width=110,this.kxz.height=40,this.kxz.x=330,this.kxz.y=448,this.addChild(this.kxz),this.wbs=new egret.TextField,this.wbs.textAlign=egret.HorizontalAlign.CENTER,this.wbs.verticalAlign=egret.VerticalAlign.MIDDLE,this.wbs.textColor=16774967,this.wbs.size=30,this.wbs.text=window.tmy[1]+"",this.wbs.width=110,this.wbs.height=40,this.wbs.x=330,this.wbs.y=548,this.addChild(this.wbs),this.jieshu.push(this.fenshubg,this.sharebtn,this.fenshu,this.gxnggdl,this.kaixinbg,this.wbsbg,this.morebtn,this.glbtn,this.kxz,this.wbs),console.log(this.jieshu)},i.share=function(){if(egret.Capabilities.isMobile){var e=new egret.Bitmap(RES.getRes("fx_png"));e.width=640,e.height=1017,e.alpha=.6,this.addChild(e);var t=this;e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.removeChild(e)},this),window.wshare.gameShareWX(window.tmy[0],window.w_gameInfo.img,function(e){window.WXSDK().init(e.link,e.img,e.desc,e.title)})}else window.wshare.gameShare(window.w_gameInfo.gameId,window.document.title,window.w_gameInfo.img,"HTML5",window.tmy[0])},i.glzs=function(){this.zsycbtn.texture=RES.getRes("zdl_png"),this.zsycbtn.width=243,this.zsycbtn.height=73,this.zsycbtn.x=198.5,this.zsycbtn.y=850,this.denglubtn.visible=!1;for(var e=0;e<this.jieshu.length;e++)this.removeChild(this.jieshu[e])},i.againGame=function(){this.removeChild(this.zsycbtn)},i.moreGame=function(){window.location.href=window.w_moreGame},i.isLogin=function(){window.bl?window.location.href=window.w_exchangeUrl:this.removeChild(this.denglubtn)},t}(egret.Sprite);egret.registerClass(EndGame,"EndGame");var GameContainer=function(e){function t(){e.call(this),this.timeOnEnterFrame=0,this.map=new MapContainer,this.addChild(this.map),this.map.x=-12800,this.map.y=-20340,this.map.roleAutoStart(),this.click=new egret.Sprite,this.click.graphics.beginFill(16711680,0),this.click.graphics.drawRect(0,0,640,1017),this.click.graphics.endFill(),this.addChild(this.click),this.click.touchEnabled=!0,this.click.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.click.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.rightUpObj=new RightUpObj,this.addChild(this.rightUpObj),this.rightUpObj.x=640,Config.starCount=0,this.rightUpObj.updateStarCount(Config.starCount),this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.timeOnEnterFrame=egret.getTimer()}__extends(t,e);var s=(__define,t),i=s.prototype;return i.restartGame=function(){this.rightUpObj.restart(),this.map.restart(),this.map.x=-12800,this.map.y=-20340,this.map.roleAutoStart(),this.click.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.click.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.timeOnEnterFrame=egret.getTimer()},i.resumeGame=function(){this.map.roleAutoStart(),this.click.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.click.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.timeOnEnterFrame=egret.getTimer()},i.stopGame=function(e){void 0===e&&(e=!1),this.map.stop(),this.click.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.click.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),e&&this.dispatchEvent(new egret.Event("gameover"))},i.onEnterFrame=function(e){null==this.map.selectedIcicle?this.map.role.enterFrameHandler():this.map.selectedIcicle.onEnterFrame(),this.map.updateMapPos(),this.map.checkStar(),this.map.checkCollide()},i.onTouchBegin=function(e){this.map.selectIcicle()},i.onTouchEnd=function(e){this.map.unselectIcicle()},t}(egret.Sprite);egret.registerClass(GameContainer,"GameContainer");var HomePage=function(e){function t(){e.call(this),this.phlistsz=[],this.phListText(),this.createView()}__extends(t,e);var s=(__define,t),i=s.prototype;return i.createView=function(){this.startbtn=new egret.Bitmap(RES.getRes("btn_start_png")),this.startbtn.width=243,this.startbtn.height=73,this.startbtn.x=198.5,this.startbtn.y=750,this.startbtn.touchEnabled=!0,this.addChild(this.startbtn),this.startbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startGame,this),this.morebtn=new egret.Bitmap(RES.getRes("btn_duihuan_png")),this.morebtn.width=243,this.morebtn.height=73,this.morebtn.x=198.5,this.morebtn.y=850,this.morebtn.touchEnabled=!0,this.addChild(this.morebtn),this.morebtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.moreGame,this),this.glbtn=new egret.Bitmap(RES.getRes("help_png")),this.glbtn.width=106,this.glbtn.height=77,this.glbtn.x=450,this.glbtn.y=750,this.glbtn.touchEnabled=!0,this.addChild(this.glbtn),this.glbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.glGame,this),this.phfirst=new egret.Bitmap(RES.getRes("phtt_png")),this.phfirst.width=426,this.phfirst.height=52,this.phfirst.x=107,this.phfirst.y=965,this.phfirst.touchEnabled=!0,this.addChild(this.phfirst),this.phfirst.addEventListener(egret.TouchEvent.TOUCH_TAP,this.phList,this),this.phListFirst()},i.startGame=function(){this.removeChild(this.startbtn)},i.moreGame=function(){window.location.href=window.w_moreGame},i.glGame=function(){this.removeChild(this.phlistsz[0][0]),this.removeChild(this.phlistsz[1][0]),this.removeChild(this.morebtn),this.removeChild(this.phfirst),this.startbtn.texture=RES.getRes("zdl_png"),this.startbtn.width=243,this.startbtn.height=73,this.startbtn.x=198.5,this.startbtn.y=850,this.removeChild(this.glbtn)},i.phList=function(){this.removeChild(this.phlistsz[0][0]),this.removeChild(this.phlistsz[1][0]),this.startbtn.visible=!1,this.removeChild(this.morebtn),this.glbtn.visible=!1,this.removeChild(this.phfirst),this.phlist=new egret.Bitmap(RES.getRes("phlist_png")),this.phlist.width=502,this.phlist.height=880,this.phlist.x=69,this.phlist.y=80,this.addChild(this.phlist),this.phclose=new egret.Bitmap(RES.getRes("icon_jt_png")),this.phclose.width=97,this.phclose.height=25,this.phclose.x=271.5,this.phclose.y=60,this.phclose.touchEnabled=!0,this.addChild(this.phclose),this.phclose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePh,this),this.phlistsz[0][0].width=180,this.phlistsz[0][0].x=165,this.phlistsz[0][0].y=190,this.phlistsz[1][0].width=120,this.phlistsz[1][0].x=365,this.phlistsz[1][0].y=190;for(var e=0;e<this.phlistsz.length;e++)for(var t=0;t<this.phlistsz[e].length;t++)this.addChild(this.phlistsz[e][t])},i.closePh=function(){for(var e=0;e<this.phlistsz.length;e++)for(var t=0;t<this.phlistsz[e].length;t++)this.removeChild(this.phlistsz[e][t]);this.removeChild(this.phlist),this.removeChild(this.phclose),this.startbtn.visible=!0,this.addChild(this.morebtn),this.glbtn.visible=!0,this.addChild(this.phfirst),this.phListFirst()},i.phListText=function(){for(var e=window.gameList,t=[],s=[],i=0;2>i;i++)for(var h=0;h<e.length;h++){var n=new egret.TextField;n.textAlign=egret.HorizontalAlign.CENTER,n.verticalAlign=egret.VerticalAlign.MIDDLE,n.size=26,n.height=36,n.y=66*h+190,0==i?(n.text=e[h].mobileNumber,n.textColor=255,n.width=180,n.x=165,t.push(n)):1==i&&(n.text=e[h].happyPoints+"",n.textColor=16777215,n.width=120,n.x=365,s.push(n))}this.phlistsz.push(t),this.phlistsz.push(s)},i.phListFirst=function(){this.phlistsz[0][0].width=160,this.phlistsz[0][0].x=195,this.phlistsz[0][0].y=980,this.addChild(this.phlistsz[0][0]),this.phlistsz[1][0].width=110,this.phlistsz[1][0].x=365,this.phlistsz[1][0].y=980,this.addChild(this.phlistsz[1][0])},t}(egret.Sprite);egret.registerClass(HomePage,"HomePage");var IcicleObj=function(e){function t(){e.call(this),this.line=new egret.Bitmap(RES.getRes("xuebing_json").getTexture("line")),this.line.anchorOffsetX=4.5,this.line.anchorOffsetY=570,this.addChild(this.line),this.line.visible=!1,this.maskObj=new egret.Sprite,this.addChild(this.maskObj),this.icicle=new egret.Bitmap(RES.getRes("xuebing_json").getTexture("icicle")),this.icicle.anchorOffsetX=41,this.icicle.anchorOffsetY=90,this.addChild(this.icicle),this.line.mask=this.maskObj}__extends(t,e);var s=(__define,t),i=s.prototype;return i.updateMask=function(e){null!=this.maskObj&&null!=this.maskObj.parent&&this.maskObj.parent.removeChild(this.maskObj),this.maskObj=new egret.Sprite,this.maskObj.graphics.beginFill(16711680,1),this.maskObj.graphics.drawCircle(0,0,e),this.maskObj.graphics.endFill(),this.addChild(this.maskObj),this.line.mask=this.maskObj},i.selected=function(e){this.role=e,this.role.stopAutoPlay(),this.icicle.texture=RES.getRes("xuebing_json").getTexture("icicle_selected"),this.line.visible=!0;var t=this.x,s=this.y,i=new egret.Point(t-e.x,s-e.y),h=new egret.Point(this.role.vx,-this.role.vy),n=i.x*h.y-i.y*h.x;this.clockwise=0>n?!0:!1,this.radius=egret.Point.distance(new egret.Point(t,s),new egret.Point(e.x,e.y));var a=180*Math.atan(Math.abs(e.x-t)/Math.abs(e.y-s))/Math.PI;e.x>=t&&e.y>=s?a=180-a:e.x<=t&&e.y>=s?a=180+a:e.x<=t&&e.y<=s&&(a=360-a),this.update(a,this.radius)},i.unselected=function(){this.icicle.texture=RES.getRes("xuebing_json").getTexture("icicle"),this.line.visible=!1,this.role.updateAngle(this.line.rotation,this.clockwise),this.role.startAutoPlay()},i.update=function(e,t){this.line.rotation=e,this.updateMask(t)},i.onEnterFrame=function(e){void 0===e&&(e=null);var t=this.role.speed*Config.pass;this.line.rotation+=this.clockwise?t/this.radius*65:-t/this.radius*65;var s=this.x,i=this.y,h=this.line.rotation*Math.PI/180;this.role.x=s+Math.sin(h)*this.radius,this.role.y=i-Math.cos(h)*this.radius,this.role.rotation=this.line.rotation+(this.clockwise?90:-90)},t}(egret.Sprite);egret.registerClass(IcicleObj,"IcicleObj");var LoadingUI=function(e){function t(){e.call(this),this.GameBg=new egret.Bitmap(RES.getRes("loading_jpg")),this.GameBg.height=1017,this.GameBg.width=640,this.addChild(this.GameBg),this.createView()}__extends(t,e);var s=(__define,t),i=s.prototype;return i.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.width=200,this.textField.height=30,this.textField.y=550,this.textField.x=220},i.setProgress=function(e,t){this.textField.text="载入中..."+parseInt(e/t*100+"")+"%"},i.delTextField=function(){this.removeChild(this.textField),this.GameBg.texture=RES.getRes("bg_jpg")},i.updateBg=function(e){this.GameBg.texture=e},t}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Login=function(e){function t(){e.call(this),this.setTime=60,this.dlzcczmm=1,this.createViewbg(),this.createView()}__extends(t,e);var s=(__define,t),i=s.prototype;return i.createViewbg=function(){var e=new egret.Shape;e.graphics.beginFill(0,.6),e.graphics.drawRect(0,0,640,1017),e.graphics.endFill(),this.addChild(e);var t=new egret.Shape;t.graphics.beginFill(16777215,1),t.graphics.drawRect(50,218,540,580),t.graphics.endFill(),this.addChild(t),this.logobg=new egret.Bitmap(RES.getRes("alert_wantkid_jpg")),this.logobg.width=540,this.logobg.height=205,this.logobg.x=50,this.logobg.y=218,this.addChild(this.logobg)},i.createView=function(){this.loginText=new egret.TextField,this.loginText.textAlign=egret.HorizontalAlign.CENTER,this.loginText.verticalAlign=egret.VerticalAlign.MIDDLE,this.loginText.width=110,this.loginText.height=40,this.loginText.y=703,this.loginText.x=265,this.loginText.textColor=13441305,this.loginText.visible=!1,this.loginText.size=24,this.loginText.text="返回登录",this.loginText.strokeColor=13441305,this.loginText.stroke=.4,this.addChild(this.loginText),this.loginText.touchEnabled=!0,this.loginText.addEventListener(egret.TouchEvent.TOUCH_TAP,this.loginGame,this),this.register=new egret.TextField,this.register.textAlign=egret.HorizontalAlign.CENTER,this.register.verticalAlign=egret.VerticalAlign.MIDDLE,this.register.width=80,this.register.height=40,this.register.y=703,this.register.x=120,this.register.textColor=13441305,this.register.size=24,this.register.text="注  册",this.register.strokeColor=13441305,this.register.stroke=.4,this.addChild(this.register),this.register.touchEnabled=!0,this.register.addEventListener(egret.TouchEvent.TOUCH_TAP,this.zcGame,this),this.resetpw=new egret.TextField,this.resetpw.textAlign=egret.HorizontalAlign.CENTER,this.resetpw.verticalAlign=egret.VerticalAlign.MIDDLE,this.resetpw.width=110,this.resetpw.height=40,this.resetpw.y=703,this.resetpw.x=410,this.resetpw.textColor=13441305,this.resetpw.size=24,this.resetpw.text="重置密码",this.resetpw.strokeColor=13441305,this.resetpw.stroke=.4,this.addChild(this.resetpw),this.resetpw.touchEnabled=!0,this.resetpw.addEventListener(egret.TouchEvent.TOUCH_TAP,this.czmmGame,this),this.returnGame=new egret.Bitmap(RES.getRes("close_png")),this.returnGame.width=60,this.returnGame.height=60,this.returnGame.y=200,this.returnGame.x=560,this.addChild(this.returnGame),this.returnGame.touchEnabled=!0,this.returnGame.addEventListener(egret.TouchEvent.TOUCH_TAP,this.resetGame,this),this.textloginx=new egret.TextField,this.textloginx.textAlign=egret.HorizontalAlign.CENTER,this.textloginx.verticalAlign=egret.VerticalAlign.MIDDLE,this.textloginx.width=640,this.textloginx.height=60,this.textloginx.size=32,this.textloginx.y=430,this.textloginx.textColor=13441305,this.textloginx.text="登  录",this.textloginx.strokeColor=13441305,this.textloginx.stroke=1,this.addChild(this.textloginx),this.textloginxx=new egret.TextField,this.textloginxx.textAlign=egret.HorizontalAlign.CENTER,this.textloginxx.verticalAlign=egret.VerticalAlign.MIDDLE,this.textloginxx.width=640,this.textloginxx.height=60,this.textloginxx.size=28,this.textloginxx.y=430,this.textloginxx.textColor=13441305,this.textloginxx.strokeColor=13441305,this.textloginxx.visible=!1,this.textloginxx.stroke=1,this.addChild(this.textloginxx),this.shouji=new egret.Bitmap(RES.getRes("shouji_jpg")),this.shouji.width=380,this.shouji.height=36,this.shouji.y=505,this.shouji.x=130,this.addChild(this.shouji),this.shoujix=new egret.TextField,this.shoujix.type=egret.TextFieldType.INPUT,this.shoujix.verticalAlign=egret.VerticalAlign.MIDDLE,this.shoujix.width=247,this.shoujix.height=32,this.shoujix.y=507,this.shoujix.x=255,this.shoujix.textColor=0,this.addChild(this.shoujix),this.shoujix.restrict="1234567890",this.shoujix.maxChars=11,this.shoujix.touchEnabled=!0,this.shoujix.addEventListener(egret.TouchEvent.TOUCH_TAP,this.prompt,this),this.mima=new egret.Bitmap(RES.getRes("mima_jpg")),this.mima.width=380,this.mima.height=36,this.mima.y=565,this.mima.x=130,this.addChild(this.mima),this.mimax=new egret.TextField,this.mimax.type=egret.TextFieldType.INPUT,this.mimax.verticalAlign=egret.VerticalAlign.BOTTOM,this.mimax.width=247,this.mimax.height=32,this.mimax.y=567,this.mimax.x=255,this.mimax.textColor=0,this.mimax.displayAsPassword=!0,this.addChild(this.mimax),this.mimax.touchEnabled=!0,this.mimax.addEventListener(egret.TouchEvent.TOUCH_TAP,this.prompt,this),this.yzm=new egret.Bitmap(RES.getRes("yzm_jpg")),this.yzm.width=380,this.yzm.height=36,this.yzm.y=630,this.yzm.x=130,this.yzm.visible=!1,this.addChild(this.yzm),this.yzmx=new egret.TextField,this.yzmx.type=egret.TextFieldType.INPUT,this.yzmx.verticalAlign=egret.VerticalAlign.BOTTOM,this.yzmx.width=138,this.yzmx.height=32,this.yzmx.y=632,this.yzmx.x=255,this.yzmx.textColor=0,this.yzmx.displayAsPassword=!0,this.yzmx.visible=!1,this.addChild(this.yzmx),this.yzmx.touchEnabled=!0,this.yzmx.addEventListener(egret.TouchEvent.TOUCH_TAP,this.prompt,this),this.hqyzm=new egret.TextField,this.hqyzm.textAlign=egret.HorizontalAlign.CENTER,this.hqyzm.verticalAlign=egret.VerticalAlign.MIDDLE,this.hqyzm.width=90,this.hqyzm.height=32,this.hqyzm.y=632,this.hqyzm.x=417,this.hqyzm.textColor=16777215,this.hqyzm.size=18,this.hqyzm.text="获取验证码",this.hqyzm.strokeColor=13441305,this.hqyzm.stroke=1,this.hqyzm.visible=!1,this.addChild(this.hqyzm),this.hqyzm.touchEnabled=!0,this.hqyzm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getCode,this),this.count=new egret.TextField,this.count.textAlign=egret.HorizontalAlign.CENTER,this.count.verticalAlign=egret.VerticalAlign.MIDDLE,this.count.width=90,this.count.height=32,this.count.y=632,this.count.x=417,this.count.textColor=16777215,this.count.size=18,this.count.text="60秒",this.count.strokeColor=13441305,this.count.stroke=1,this.count.visible=!1,this.addChild(this.count),this.loginbtn=new egret.Bitmap(RES.getRes("loginimg_jpg")),this.loginbtn.width=400,this.loginbtn.height=36,this.loginbtn.y=650,this.loginbtn.x=120,this.addChild(this.loginbtn),this.textlogin=new egret.TextField,this.textlogin.textAlign=egret.HorizontalAlign.CENTER,this.textlogin.verticalAlign=egret.VerticalAlign.MIDDLE,this.textlogin.width=400,this.textlogin.height=36,this.textlogin.size=24,this.textlogin.y=651,this.textlogin.x=120,this.textlogin.textColor=16777215,this.textlogin.text="登  录",this.textlogin.strokeColor=16777215,this.textlogin.stroke=.4,this.addChild(this.textlogin),this.textlogin.touchEnabled=!0,this.textlogin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Login,this)},i.loginGame=function(){this.dlzcczmm=1,this.textloginx.text="登  录",this.textlogin.text="登  录",this.yzm.visible=!1,this.yzmx.visible=!1,this.hqyzm.visible=!1,this.loginText.visible=!1,this.register.visible=!0,this.resetpw.visible=!0,this.delinsert(),this.prompt(),this.stopTimer()},i.zcGame=function(){this.dlzcczmm=2,this.textloginx.text="注  册",this.textlogin.text="注  册",this.yzm.visible=!0,this.yzmx.visible=!0,this.hqyzm.visible=!0,this.loginText.visible=!0,this.register.visible=!1,this.resetpw.visible=!1,this.insertYzm(),this.prompt(),this.stopTimer()},i.czmmGame=function(){this.dlzcczmm=3,this.textloginx.text="重置密码",this.textlogin.text="重  置",this.yzm.visible=!0,this.yzmx.visible=!0,this.hqyzm.visible=!0,this.loginText.visible=!0,this.register.visible=!1,this.resetpw.visible=!1,this.insertYzm(),this.prompt(),this.stopTimer()},i.resetGame=function(){this.removeChild(this.returnGame)},i.Login=function(){this.textloginxx.text=window.loginSubmit(this.shoujix.text,this.mimax.text,this.yzmx.text,this.dlzcczmm),window.bl?this.removeChild(this.textlogin):(this.textloginxx.visible=!0,this.textloginx.visible=!1,this.shoujix.touchEnabled=!0,this.shoujix.addEventListener(egret.TouchEvent.TOUCH_TAP,this.prompt,this),this.mimax.touchEnabled=!0,this.mimax.addEventListener(egret.TouchEvent.TOUCH_TAP,this.prompt,this),this.yzmx.touchEnabled=!0,this.yzmx.addEventListener(egret.TouchEvent.TOUCH_TAP,this.prompt,this))},i.getCode=function(){try{this.shoujix.text.length<=0?(this.textloginxx.text="请输入手机号码",this.textloginxx.visible=!0,this.textloginx.visible=!1):(window.getCode(this.shoujix.text),window.returnInformation&&window.returnInformation.error?(this.textloginxx.text=window.returnInformation.error,this.textloginxx.visible=!0,this.textloginx.visible=!1):(this.prompt(),this.hqyzm.visible=!1,this.count.visible=!0,this.timer=new egret.Timer(1e3,60),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerComFunc,this),this.timer.start()))}catch(e){console.log(e)}},i.prompt=function(){this.textloginxx.visible=!1,this.textloginx.visible=!0},i.timerFunc=function(){this.setTime--,this.count.text=this.setTime+"秒"},i.timerComFunc=function(){this.hqyzm.visible=!0,this.count.visible=!1,this.setTime=60},i.stopTimer=function(){this.setTime=60,1==this.count.visible&&(this.timer.reset(),this.count.visible=!1)},i.insertYzm=function(){this.loginbtn.y=700,this.textlogin.y=701,this.loginText.y=743,this.register.y=743,this.resetpw.y=743},i.delinsert=function(){this.loginbtn.y=650,this.textlogin.y=651,this.loginText.y=73,this.register.y=703,this.resetpw.y=703},t}(egret.Sprite);egret.registerClass(Login,"Login");var Main=function(e){function t(){if(e.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),egret.Capabilities.isMobile){var t=egret.MainContext.instance.stage;t.setContentSize(640,1017),t.orientation=egret.OrientationMode.PORTRAIT,t.scaleMode=egret.StageScaleMode.EXACT_FIT}}__extends(t,e);var s=(__define,t),i=s.prototype;return i.onAddToStage=function(e){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},i.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("load")},i.onResourceLoadComplete=function(e){"load"==e.groupName&&(this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete1,this),RES.loadGroup("preload"))},i.onResourceLoadComplete1=function(e){"preload"==e.groupName&&(this.loadingView.delTextField(),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete1,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.inHomePage())},i.inHomePage=function(){this.homePage=new HomePage,this.stage.addChild(this.homePage),this.homePage.startbtn.addEventListener(egret.Event.REMOVED,this.startGame,this),this.homePage.glbtn.addEventListener(egret.Event.REMOVED,this.showGl,this)},i.showGl=function(){this.loadingView.updateBg(RES.getRes("glbg_jpg"))},i.startGame=function(){this.stage.removeChild(this.homePage),this.stage.removeChild(this.loadingView),this.createGameScene()},i.gameOver=function(){this.stage.removeChild(this.game),this.stage.addChild(this.loadingView),this.loadingView.updateBg(RES.getRes("bg_jpg")),this.endGame=new EndGame,this.stage.addChild(this.endGame),this.endGame.zsycbtn.addEventListener(egret.Event.REMOVED,this.againGame,this),this.endGame.glbtn.addEventListener(egret.Event.REMOVED,this.showGl,this),this.endGame.denglubtn.addEventListener(egret.Event.REMOVED,this.loginGame,this)},i.againGame=function(){this.stage.removeChild(this.endGame),this.createGameScene()},i.loginGame=function(){this.login=new Login,this.stage.addChild(this.login),this.stage.removeChild(this.endGame),this.login.textlogin.addEventListener(egret.TouchEvent.REMOVED,this.fhGame,this),this.login.returnGame.addEventListener(egret.TouchEvent.REMOVED,this.fhGame,this)},i.fhGame=function(){this.stage.removeChild(this.login),this.endGame=new EndGame,this.stage.addChild(this.endGame),this.endGame.zsycbtn.addEventListener(egret.Event.REMOVED,this.againGame,this),this.endGame.glbtn.addEventListener(egret.Event.REMOVED,this.showGl,this),this.endGame.denglubtn.addEventListener(egret.Event.REMOVED,this.loginGame,this)},i.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},i.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},i.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},i.createGameScene=function(){this.game=new GameContainer,this.game.addEventListener("gameover",this.gameOver,this),this.stage.addChild(this.game)},t}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var MapContainer=function(e){function t(){e.call(this),this.mapXCount=40,this.mapYCount=40,this.initX=20,this.initY=20,this.mapAllCount=20,this.init(),this.role=new RoleObj,this.addChild(this.role),this.initRoleX=640*this.initX+320,this.role.x=this.initRoleX,this.initRoleY=1017*this.initY+508,this.role.y=this.initRoleY,this.currentMapX=this.initX,this.currentMapY=this.initY,this.addMaps(this.currentMapX,this.currentMapY);var t=new egret.Timer(100,0);t.addEventListener(egret.TimerEvent.TIMER,this.showRoleParticle,this)}__extends(t,e);var s=(__define,t),i=s.prototype;return i.restart=function(){this.init(),this.role.reset(),this.addChild(this.role),this.initRoleX=640*this.initX+320,this.role.x=this.initRoleX,this.initRoleY=1017*this.initY+508,this.role.y=this.initRoleY,this.currentMapX=this.initX,this.currentMapY=this.initY,this.addMaps(this.currentMapX,this.currentMapY)},i.init=function(){if(null==this.maps){this.maps=new Array;for(var e=0;e<this.mapXCount;e++){for(var t=new Array,s=0;s<this.mapYCount;s++)t.push(null);this.maps.push(t)}}else for(var i=this.maps.length-1;i>=0;i--)for(var h=this.maps[i].length-1;h>=0;h--)null!=this.maps[i][h]&&(null!=this.maps[i][h].parent&&this.removeChild(this.maps[i][h]),this.maps[i][h]=null);var n=Math.floor(3*Math.random()),a=new MapObj("A"+(n+1).toString());this.maps[this.initX][this.initY]=a;for(var r=this.initX,l=this.initY,o=0;;){for(var p=this.maps[r][l],d=new Array,g=0;g<p.vo.relatedMaps.length;g++){var u=p.vo.relatedMaps[g];if(0==u.posType&&null==this.maps[r-1][l]||1==u.posType&&null==this.maps[r][l+1]||2==u.posType&&null==this.maps[r+1][l]||3==u.posType&&null==this.maps[r][l-1]){var c=r,w=l;0==u.posType?c=r-1:1==u.posType?w=l+1:2==u.posType?c=r+1:3==u.posType&&(w=l-1);for(var m=this.getRelatedPos(u.posType),E=MapVO.getOtherOuts(u.name,m),R=!1,b=0;b<E.length;b++){if(0==E[b]&&null!=this.maps[c-1][w]){R=!0;break}if(1==E[b]&&null!=this.maps[c][w+1]){R=!0;break}if(2==E[b]&&null!=this.maps[c+1][w]){R=!0;break}if(3==E[b]&&null!=this.maps[c][w-1]){R=!0;break}}0==R&&d.push(u.clone())}}if(0!=d.length){var x=d[Math.floor(Math.random()*d.length)],M=new MapObj(x.name);if(M.prevX=r,M.prevY=l,0==x.posType?(this.maps[r-1][l]=M,r--):1==x.posType?(this.maps[r][l+1]=M,l++):2==x.posType?(this.maps[r+1][l]=M,r++):3==x.posType&&(this.maps[r][l-1]=M,l--),"E"==x.name.charAt(0)){var C;"E2"==x.name||"E3"==x.name||"E4"==x.name?(C=new MapObj("E1"),this.maps[r][l-1]=C):("E6"==x.name||"E7"==x.name||"E8"==x.name)&&(C=new MapObj("E5"),this.maps[r][l+1]=C)}if(o++,o>=this.mapAllCount)break}else{var v=this.maps[r][l].url;"E"==v.charAt(0)&&("E2"==v||"E3"==v||"E4"==v?this.maps[r][l-1]=null:("E6"==v||"E7"==v||"E8"==v)&&(this.maps[r][l+1]=null)),this.maps[r][l]=null,r=p.prevX,l=p.prevY,o--}}console.log("completed");var i=0,f=0,P=this.initX,T=this.initX,y=this.initY,_=this.initY;for(i=0;i<this.mapXCount;i++)for(f=0;f<this.mapYCount;f++)null!=this.maps[i][f]&&(P>=i?P=i:i>=T&&(T=i),y>=f?y=f:f>=_&&(_=f),this.maps[i][f].createView(),this.maps[i][f].x=640*f,this.maps[i][f].y=1017*i);for(i=0,f=0,i=P-1;T+1>=i;i++)for(f=y-1;_+1>=f;f++)null==this.maps[i][f]&&(this.maps[i][f]=new MapObj("null"),this.maps[i][f].createView(),this.maps[i][f].x=640*f,this.maps[i][f].y=1017*i);if(null!=this.icicleObjs)for(var b=this.icicleObjs.length-1;b>=0;b--)this.removeChild(this.icicleObjs[b]),this.icicleObjs.splice(b,1);for(this.icicleObjs=new Array,i=0;i<this.mapXCount;i++)for(f=0;f<this.mapYCount;f++)if(null!=this.maps[i][f]&&null!=this.maps[i][f].vo){for(var B=0;B<this.maps[i][f].vo.iciclePoses.length;B++){var A=new IcicleObj;this.addChild(A),A.x=this.maps[i][f].vo.iciclePoses[B].x+this.maps[i][f].x,A.y=this.maps[i][f].vo.iciclePoses[B].y+this.maps[i][f].y,this.icicleObjs.push(A)}this.maps[i][f].createStar()}},i.removeMaps=function(e,t){null!=this.maps[e][t]&&null!=this.maps[e][t].parent&&this.removeChild(this.maps[e][t]),null!=this.maps[e-1][t]&&null!=this.maps[e-1][t].parent&&this.removeChild(this.maps[e-1][t]),null!=this.maps[e+1][t]&&null!=this.maps[e+1][t].parent&&this.removeChild(this.maps[e+1][t]),null!=this.maps[e][t-1]&&null!=this.maps[e][t-1].parent&&this.removeChild(this.maps[e][t-1]),null!=this.maps[e][t+1]&&null!=this.maps[e][t+1].parent&&this.removeChild(this.maps[e][t+1]),null!=this.maps[e-1][t-1]&&null!=this.maps[e-1][t-1].parent&&this.removeChild(this.maps[e-1][t-1]),null!=this.maps[e-1][t+1]&&null!=this.maps[e-1][t+1].parent&&this.removeChild(this.maps[e-1][t+1]),null!=this.maps[e+1][t-1]&&null!=this.maps[e+1][t-1].parent&&this.removeChild(this.maps[e+1][t-1]),null!=this.maps[e+1][t+1]&&null!=this.maps[e+1][t+1].parent&&this.removeChild(this.maps[e+1][t+1])},i.addMaps=function(e,t){null!=this.maps[e][t]&&this.addChildAt(this.maps[e][t],0),null!=this.maps[e-1][t]&&this.addChildAt(this.maps[e-1][t],0),null!=this.maps[e+1][t]&&this.addChildAt(this.maps[e+1][t],0),null!=this.maps[e][t-1]&&this.addChildAt(this.maps[e][t-1],0),null!=this.maps[e][t+1]&&this.addChildAt(this.maps[e][t+1],0),null!=this.maps[e-1][t-1]&&this.addChildAt(this.maps[e-1][t-1],0),null!=this.maps[e-1][t+1]&&this.addChildAt(this.maps[e-1][t+1],0),null!=this.maps[e+1][t-1]&&this.addChildAt(this.maps[e+1][t-1],0),null!=this.maps[e+1][t+1]&&this.addChildAt(this.maps[e+1][t+1],0)
},i.showRoleParticle=function(e){void 0===e&&(e=null);var t=ParticlePool.getParticle();this.addChildAt(t,this.getChildIndex(this.role)-1);var s=this.role.localToGlobal(60,80);t.x=s.x-this.x,t.y=s.y-this.y,t.animate()},i.roleAutoStart=function(){this.role.startAutoPlay()},i.updateMapPos=function(){this.x+=this.initRoleX-this.role.x,this.y+=this.initRoleY-this.role.y,this.initRoleX=this.role.x,this.initRoleY=this.role.y;var e=Math.ceil(this.role.x/640)-1,t=Math.ceil(this.role.y/1017)-1;(e!=this.currentMapY||t!=this.currentMapX)&&(this.removeMaps(this.currentMapX,this.currentMapY),this.addMaps(t,e),this.currentMapX=t,this.currentMapY=e)},i.checkStar=function(){var e=Math.ceil(this.role.x/640)-1,t=Math.ceil(this.role.y/1017)-1;if(null!=this.maps[t][e])for(var s=0;s<this.maps[t][e].stars.length;s++){var i=egret.Point.distance(new egret.Point(this.maps[t][e].x+this.maps[t][e].stars[s].x,this.maps[t][e].y+this.maps[t][e].stars[s].y),new egret.Point(this.role.x,this.role.y));if(50>=i)return this.maps[t][e].stars[s].parent.removeChild(this.maps[t][e].stars[s]),this.maps[t][e].stars.splice(s,1),Config.starCount++,window.tmy[0]=Config.starCount,void this.parent.rightUpObj.updateStarCount(Config.starCount)}},i.checkCollide=function(){var e=Math.ceil(this.role.x/640)-1,t=Math.ceil(this.role.y/1017)-1;if(null!=this.maps[t][e]){var s=this.maps[t][e].checkCollide(this.role.x-this.maps[t][e].x,this.role.y-this.maps[t][e].y);s&&this.parent.stopGame(!0)}},i.stop=function(){this.unselectIcicle(),this.role.stopAutoPlay()},i.getRelatedPos=function(e){return 0==e?2:1==e?3:2==e?0:3==e?1:void 0},i.selectIcicle=function(){this.selectedIcicle=null;for(var e=-1,t=0;t<this.icicleObjs.length;t++){var s=this.icicleObjs[t],i=egret.Point.distance(new egret.Point(s.x,s.y),new egret.Point(this.role.x,this.role.y));-1==e?(e=i,this.selectedIcicle=s):-1!=e&&e>i&&(e=i,this.selectedIcicle=s)}this.selectedIcicle&&this.selectedIcicle.selected(this.role)},i.unselectIcicle=function(){this.selectedIcicle&&(this.selectedIcicle.unselected(),this.selectedIcicle=null)},t}(egret.Sprite);egret.registerClass(MapContainer,"MapContainer");var MapObj=function(e){function t(t){e.call(this),this.url=t,this.vo=new MapVO(t)}__extends(t,e);var s=(__define,t),i=s.prototype;return i.checkCollide=function(e,t){for(var s=!1,i=0;i<this.vo.collideCubes.length;i++){var h=this.vo.collideCubes[i];if(h.x<=e&&e<=h.x+h.width&&h.y<=t&&t<=h.y+h.height){s=!0;break}}return!s},i.createView=function(){this.bg=new egret.Bitmap(RES.getRes("bg_png")),this.addChild(this.bg),"null"!=this.url&&(this.map=new egret.Bitmap(RES.getRes(this.url+"_png")),this.addChild(this.map))},i.createStar=function(){this.stars=new Array;for(var e=0;e<this.vo.starPoses.length;e++){var t=new StarObj;this.addChild(t),t.x=this.vo.starPoses[e].x,t.y=this.vo.starPoses[e].y,this.stars.push(t)}},t}(egret.Sprite);egret.registerClass(MapObj,"MapObj");var MapVO=function(){function e(e){switch(this.name=e,this.iciclePoses=new Array,this.relatedMaps=new Array,this.starPoses=new Array,this.collideCubes=new Array,this.name){case"A1":this.relatedMaps.push(new RelatedMap("B1",0)),this.relatedMaps.push(new RelatedMap("B2",0)),this.relatedMaps.push(new RelatedMap("B7",0)),this.relatedMaps.push(new RelatedMap("B8",0)),this.relatedMaps.push(new RelatedMap("E3",0)),this.relatedMaps.push(new RelatedMap("E4",0)),this.relatedMaps.push(new RelatedMap("E7",0)),this.relatedMaps.push(new RelatedMap("E8",0)),this.outs=[0],this.collideCubes.push(new egret.Rectangle(188,0,263,780));break;case"A2":this.relatedMaps.push(new RelatedMap("B8",1)),this.relatedMaps.push(new RelatedMap("C1",1)),this.relatedMaps.push(new RelatedMap("E7",1)),this.outs=[1],this.iciclePoses.push(new egret.Point(540,480)),this.collideCubes.push(new egret.Rectangle(188,119,263,661)),this.collideCubes.push(new egret.Rectangle(432,119,210,262)),this.collideCubes.push(new egret.Rectangle(451,381,78,76));break;case"A3":this.relatedMaps.push(new RelatedMap("B2",3)),this.relatedMaps.push(new RelatedMap("C2",3)),this.relatedMaps.push(new RelatedMap("E3",3)),this.outs=[3],this.iciclePoses.push(new egret.Point(100,480)),this.collideCubes.push(new egret.Rectangle(188,119,263,661)),this.collideCubes.push(new egret.Rectangle(-17,119,207,262)),this.collideCubes.push(new egret.Rectangle(110,381,78,76));break;case"B1":this.relatedMaps.push(new RelatedMap("B3",2)),this.relatedMaps.push(new RelatedMap("B5",1)),this.relatedMaps.push(new RelatedMap("B5",2)),this.relatedMaps.push(new RelatedMap("B7",1)),this.relatedMaps.push(new RelatedMap("E2",2)),this.relatedMaps.push(new RelatedMap("E4",2)),this.relatedMaps.push(new RelatedMap("E6",2)),this.relatedMaps.push(new RelatedMap("E8",2)),this.outs=[1,2],this.iciclePoses.push(new egret.Point(540,740)),this.starPoses.push(new egret.Point(530,508)),this.starPoses.push(new egret.Point(381,566)),this.starPoses.push(new egret.Point(320,720)),this.collideCubes.push(new egret.Rectangle(188,375,263,648)),this.collideCubes.push(new egret.Rectangle(451,376,207,262)),this.collideCubes.push(new egret.Rectangle(451,638,78,76));break;case"B2":this.relatedMaps.push(new RelatedMap("B3",2)),this.relatedMaps.push(new RelatedMap("B5",2)),this.relatedMaps.push(new RelatedMap("B8",1)),this.relatedMaps.push(new RelatedMap("C1",1)),this.relatedMaps.push(new RelatedMap("E2",2)),this.relatedMaps.push(new RelatedMap("E4",2)),this.relatedMaps.push(new RelatedMap("E6",2)),this.relatedMaps.push(new RelatedMap("E7",1)),this.relatedMaps.push(new RelatedMap("E8",2)),this.outs=[1,2],this.iciclePoses.push(new egret.Point(540,480)),this.starPoses.push(new egret.Point(530,240)),this.starPoses.push(new egret.Point(381,323)),this.starPoses.push(new egret.Point(320,508)),this.collideCubes.push(new egret.Rectangle(188,119,263,904)),this.collideCubes.push(new egret.Rectangle(451,120,207,262)),this.collideCubes.push(new egret.Rectangle(451,382,78,76));break;case"B3":this.relatedMaps.push(new RelatedMap("B1",0)),this.relatedMaps.push(new RelatedMap("B5",1)),this.relatedMaps.push(new RelatedMap("B7",0)),this.relatedMaps.push(new RelatedMap("B7",1)),this.relatedMaps.push(new RelatedMap("E3",0)),this.relatedMaps.push(new RelatedMap("E4",0)),this.relatedMaps.push(new RelatedMap("E7",0)),this.relatedMaps.push(new RelatedMap("E8",0)),this.outs=[0,1],this.iciclePoses.push(new egret.Point(540,290)),this.starPoses.push(new egret.Point(530,508)),this.starPoses.push(new egret.Point(381,423)),this.starPoses.push(new egret.Point(320,240)),this.collideCubes.push(new egret.Rectangle(188,-2,263,641)),this.collideCubes.push(new egret.Rectangle(451,378,207,262)),this.collideCubes.push(new egret.Rectangle(451,305,78,76));break;case"B4":this.relatedMaps.push(new RelatedMap("B1",0)),this.relatedMaps.push(new RelatedMap("B6",1)),this.relatedMaps.push(new RelatedMap("B7",0)),this.relatedMaps.push(new RelatedMap("C2",1)),this.relatedMaps.push(new RelatedMap("E3",0)),this.relatedMaps.push(new RelatedMap("E4",0)),this.relatedMaps.push(new RelatedMap("E7",0)),this.relatedMaps.push(new RelatedMap("E6",1)),this.relatedMaps.push(new RelatedMap("E8",0)),this.outs=[0,1],this.iciclePoses.push(new egret.Point(540,550)),this.starPoses.push(new egret.Point(530,760)),this.starPoses.push(new egret.Point(381,670)),this.starPoses.push(new egret.Point(320,508)),this.collideCubes.push(new egret.Rectangle(188,-2,263,900)),this.collideCubes.push(new egret.Rectangle(451,635,207,262)),this.collideCubes.push(new egret.Rectangle(451,562,78,76));break;case"B5":this.relatedMaps.push(new RelatedMap("B1",0)),this.relatedMaps.push(new RelatedMap("B1",3)),this.relatedMaps.push(new RelatedMap("B3",3)),this.relatedMaps.push(new RelatedMap("B7",0)),this.relatedMaps.push(new RelatedMap("E3",0)),this.relatedMaps.push(new RelatedMap("E4",0)),this.relatedMaps.push(new RelatedMap("E7",0)),this.relatedMaps.push(new RelatedMap("E8",0)),this.outs=[0,3],this.iciclePoses.push(new egret.Point(100,290)),this.starPoses.push(new egret.Point(110,508)),this.starPoses.push(new egret.Point(264,417)),this.starPoses.push(new egret.Point(320,240)),this.collideCubes.push(new egret.Rectangle(188,-2,263,643)),this.collideCubes.push(new egret.Rectangle(-14,378,207,262)),this.collideCubes.push(new egret.Rectangle(110,302,78,76));break;case"B6":this.relatedMaps.push(new RelatedMap("B1",0)),this.relatedMaps.push(new RelatedMap("B4",3)),this.relatedMaps.push(new RelatedMap("B7",0)),this.relatedMaps.push(new RelatedMap("C1",3)),this.relatedMaps.push(new RelatedMap("E2",3)),this.relatedMaps.push(new RelatedMap("E3",0)),this.relatedMaps.push(new RelatedMap("E4",0)),this.relatedMaps.push(new RelatedMap("E7",0)),this.relatedMaps.push(new RelatedMap("E8",0)),this.outs=[0,3],this.iciclePoses.push(new egret.Point(100,550)),this.starPoses.push(new egret.Point(110,760)),this.starPoses.push(new egret.Point(264,672)),this.starPoses.push(new egret.Point(320,508)),this.collideCubes.push(new egret.Rectangle(188,-2,263,900)),this.collideCubes.push(new egret.Rectangle(-14,636,207,262)),this.collideCubes.push(new egret.Rectangle(110,560,78,76));break;case"B7":this.relatedMaps.push(new RelatedMap("B1",3)),this.relatedMaps.push(new RelatedMap("B3",2)),this.relatedMaps.push(new RelatedMap("B3",3)),this.relatedMaps.push(new RelatedMap("B5",2)),this.relatedMaps.push(new RelatedMap("E2",2)),this.relatedMaps.push(new RelatedMap("E4",2)),this.relatedMaps.push(new RelatedMap("E6",2)),this.relatedMaps.push(new RelatedMap("E8",2)),this.outs=[2,3],this.iciclePoses.push(new egret.Point(100,740)),this.starPoses.push(new egret.Point(110,508)),this.starPoses.push(new egret.Point(264,589)),this.starPoses.push(new egret.Point(320,760)),this.collideCubes.push(new egret.Rectangle(188,375,263,646)),this.collideCubes.push(new egret.Rectangle(-14,377,207,262)),this.collideCubes.push(new egret.Rectangle(110,639,78,76));break;case"B8":this.relatedMaps.push(new RelatedMap("B2",3)),this.relatedMaps.push(new RelatedMap("B3",2)),this.relatedMaps.push(new RelatedMap("B5",2)),this.relatedMaps.push(new RelatedMap("C2",3)),this.relatedMaps.push(new RelatedMap("E2",2)),this.relatedMaps.push(new RelatedMap("E3",3)),this.relatedMaps.push(new RelatedMap("E4",2)),this.relatedMaps.push(new RelatedMap("E6",2)),this.relatedMaps.push(new RelatedMap("E8",2)),this.outs=[2,3],this.iciclePoses.push(new egret.Point(100,480)),this.starPoses.push(new egret.Point(110,240)),this.starPoses.push(new egret.Point(264,330)),this.starPoses.push(new egret.Point(320,508)),this.collideCubes.push(new egret.Rectangle(188,118,263,903)),this.collideCubes.push(new egret.Rectangle(-14,119,207,262)),this.collideCubes.push(new egret.Rectangle(110,377,78,76));break;case"C1":this.relatedMaps.push(new RelatedMap("B2",3)),this.relatedMaps.push(new RelatedMap("B6",1)),this.relatedMaps.push(new RelatedMap("C2",1)),this.outs=[1,3],this.iciclePoses.push(new egret.Point(100,480)),this.iciclePoses.push(new egret.Point(540,550)),this.starPoses.push(new egret.Point(110,240)),this.starPoses.push(new egret.Point(320,508)),this.starPoses.push(new egret.Point(530,760)),this.collideCubes.push(new egret.Rectangle(188,118,263,780)),this.collideCubes.push(new egret.Rectangle(-14,119,207,262)),this.collideCubes.push(new egret.Rectangle(110,377,78,76)),this.collideCubes.push(new egret.Rectangle(451,636,207,262)),this.collideCubes.push(new egret.Rectangle(451,560,78,76));break;case"C2":this.relatedMaps.push(new RelatedMap("B4",3)),this.relatedMaps.push(new RelatedMap("B8",1)),this.relatedMaps.push(new RelatedMap("C1",3)),this.outs=[1,3],this.iciclePoses.push(new egret.Point(100,550)),this.iciclePoses.push(new egret.Point(540,480)),this.starPoses.push(new egret.Point(110,760)),this.starPoses.push(new egret.Point(320,508)),this.starPoses.push(new egret.Point(530,240)),this.collideCubes.push(new egret.Rectangle(188,118,263,780)),this.collideCubes.push(new egret.Rectangle(446,119,207,262)),this.collideCubes.push(new egret.Rectangle(450,381,78,76)),this.collideCubes.push(new egret.Rectangle(-19,636,207,262)),this.collideCubes.push(new egret.Rectangle(113,560,78,76));break;case"E1":this.relatedMaps.push(new RelatedMap("E2",3)),this.relatedMaps.push(new RelatedMap("E3",3)),this.relatedMaps.push(new RelatedMap("E4",3)),this.outs=[3],this.iciclePoses.push(new egret.Point(562,508)),this.starPoses.push(new egret.Point(530,760)),this.starPoses.push(new egret.Point(320,508)),this.starPoses.push(new egret.Point(530,240)),this.collideCubes.push(new egret.Rectangle(188,118,263,780)),this.collideCubes.push(new egret.Rectangle(446,119,207,262)),this.collideCubes.push(new egret.Rectangle(450,381,78,76)),this.collideCubes.push(new egret.Rectangle(448,636,207,262)),this.collideCubes.push(new egret.Rectangle(451,560,78,76));break;case"E2":this.relatedMaps.push(new RelatedMap("B1",0)),this.relatedMaps.push(new RelatedMap("B2",0)),this.relatedMaps.push(new RelatedMap("B7",0)),this.relatedMaps.push(new RelatedMap("B8",0)),this.relatedMaps.push(new RelatedMap("E1",3)),this.relatedMaps.push(new RelatedMap("E3",0)),this.relatedMaps.push(new RelatedMap("E4",0)),this.relatedMaps.push(new RelatedMap("E7",0)),this.relatedMaps.push(new RelatedMap("E8",0)),this.outs=[0,1,3],this.iciclePoses.push(new egret.Point(70,60)),this.starPoses.push(new egret.Point(264,200)),this.collideCubes.push(new egret.Rectangle(188,-3,263,383)),this.collideCubes.push(new egret.Rectangle(-18,119,207,262)),this.collideCubes.push(new egret.Rectangle(116,46,78,76)),this.collideCubes.push(new egret.Rectangle(-19,636,664,262));break;case"E3":this.relatedMaps.push(new RelatedMap("B3",2)),this.relatedMaps.push(new RelatedMap("B4",2)),this.relatedMaps.push(new RelatedMap("B5",2)),this.relatedMaps.push(new RelatedMap("B6",2)),this.relatedMaps.push(new RelatedMap("B8",1)),this.relatedMaps.push(new RelatedMap("E1",3)),this.relatedMaps.push(new RelatedMap("E2",2)),this.relatedMaps.push(new RelatedMap("E4",2)),this.relatedMaps.push(new RelatedMap("E6",2)),this.relatedMaps.push(new RelatedMap("E8",2)),this.outs=[1,2,3],this.iciclePoses.push(new egret.Point(70,957)),this.starPoses.push(new egret.Point(264,817)),this.collideCubes.push(new egret.Rectangle(188,636,263,383)),this.collideCubes.push(new egret.Rectangle(-15,636,207,262)),this.collideCubes.push(new egret.Rectangle(117,897,78,76)),this.collideCubes.push(new egret.Rectangle(-19,118,664,262));break;case"E4":this.relatedMaps.push(new RelatedMap("B1",0)),this.relatedMaps.push(new RelatedMap("B2",0)),this.relatedMaps.push(new RelatedMap("B3",2)),this.relatedMaps.push(new RelatedMap("B4",2)),this.relatedMaps.push(new RelatedMap("B5",2)),this.relatedMaps.push(new RelatedMap("B6",2)),this.relatedMaps.push(new RelatedMap("B7",0)),this.relatedMaps.push(new RelatedMap("B8",0)),this.relatedMaps.push(new RelatedMap("E1",3)),this.relatedMaps.push(new RelatedMap("E2",2)),this.relatedMaps.push(new RelatedMap("E3",0)),this.relatedMaps.push(new RelatedMap("E6",2)),this.relatedMaps.push(new RelatedMap("E7",0)),this.relatedMaps.push(new RelatedMap("E8",0)),this.relatedMaps.push(new RelatedMap("E8",2)),this.outs=[0,2,3],this.iciclePoses.push(new egret.Point(70,60)),this.iciclePoses.push(new egret.Point(70,957)),this.starPoses.push(new egret.Point(264,200)),this.starPoses.push(new egret.Point(264,817)),this.collideCubes.push(new egret.Rectangle(188,636,263,383)),this.collideCubes.push(new egret.Rectangle(-15,636,207,262)),this.collideCubes.push(new egret.Rectangle(117,897,78,76)),this.collideCubes.push(new egret.Rectangle(188,-2,263,383)),this.collideCubes.push(new egret.Rectangle(-15,120,207,262)),this.collideCubes.push(new egret.Rectangle(110,46,78,76));break;case"E5":this.relatedMaps.push(new RelatedMap("E6",3)),this.relatedMaps.push(new RelatedMap("E7",3)),this.relatedMaps.push(new RelatedMap("E8",3)),this.outs=[3],this.iciclePoses.push(new egret.Point(78,508)),this.starPoses.push(new egret.Point(110,240)),this.starPoses.push(new egret.Point(320,508)),this.starPoses.push(new egret.Point(110,760)),this.collideCubes.push(new egret.Rectangle(188,118,263,780)),this.collideCubes.push(new egret.Rectangle(-18,119,207,262)),this.collideCubes.push(new egret.Rectangle(116,381,78,76)),this.collideCubes.push(new egret.Rectangle(-18,636,207,262)),this.collideCubes.push(new egret.Rectangle(116,560,78,76));break;case"E6":this.relatedMaps.push(new RelatedMap("B1",0)),this.relatedMaps.push(new RelatedMap("B2",0)),this.relatedMaps.push(new RelatedMap("B7",0)),this.relatedMaps.push(new RelatedMap("B8",0)),this.relatedMaps.push(new RelatedMap("E3",0)),this.relatedMaps.push(new RelatedMap("E4",0)),this.relatedMaps.push(new RelatedMap("E5",1)),this.relatedMaps.push(new RelatedMap("E7",0)),this.relatedMaps.push(new RelatedMap("E8",0)),this.outs=[0,1,3],this.iciclePoses.push(new egret.Point(510,60)),this.starPoses.push(new egret.Point(381,200)),this.collideCubes.push(new egret.Rectangle(188,-3,263,383)),this.collideCubes.push(new egret.Rectangle(445,119,207,262)),this.collideCubes.push(new egret.Rectangle(450,46,78,76)),this.collideCubes.push(new egret.Rectangle(-19,636,664,262));break;case"E7":this.relatedMaps.push(new RelatedMap("B2",3)),this.relatedMaps.push(new RelatedMap("B3",2)),this.relatedMaps.push(new RelatedMap("B4",2)),this.relatedMaps.push(new RelatedMap("B5",2)),this.relatedMaps.push(new RelatedMap("B6",2)),this.relatedMaps.push(new RelatedMap("E2",2)),this.relatedMaps.push(new RelatedMap("E4",2)),this.relatedMaps.push(new RelatedMap("E5",1)),this.relatedMaps.push(new RelatedMap("E6",2)),this.relatedMaps.push(new RelatedMap("E8",2)),this.outs=[1,2,3],this.iciclePoses.push(new egret.Point(510,957)),this.starPoses.push(new egret.Point(381,817)),this.collideCubes.push(new egret.Rectangle(188,636,263,383)),this.collideCubes.push(new egret.Rectangle(445,636,207,262)),this.collideCubes.push(new egret.Rectangle(450,897,78,76)),this.collideCubes.push(new egret.Rectangle(-19,118,664,262));break;case"E8":this.relatedMaps.push(new RelatedMap("B1",0)),this.relatedMaps.push(new RelatedMap("B2",0)),this.relatedMaps.push(new RelatedMap("B3",2)),this.relatedMaps.push(new RelatedMap("B4",2)),this.relatedMaps.push(new RelatedMap("B5",2)),this.relatedMaps.push(new RelatedMap("B6",2)),this.relatedMaps.push(new RelatedMap("B7",0)),this.relatedMaps.push(new RelatedMap("B8",0)),this.relatedMaps.push(new RelatedMap("E2",2)),this.relatedMaps.push(new RelatedMap("E4",0)),this.relatedMaps.push(new RelatedMap("E4",2)),this.relatedMaps.push(new RelatedMap("E5",1)),this.relatedMaps.push(new RelatedMap("E6",2)),this.relatedMaps.push(new RelatedMap("E7",0)),this.outs=[0,1,2],this.iciclePoses.push(new egret.Point(510,60)),this.iciclePoses.push(new egret.Point(510,957)),this.starPoses.push(new egret.Point(381,200)),this.starPoses.push(new egret.Point(381,817)),this.collideCubes.push(new egret.Rectangle(188,636,263,383)),this.collideCubes.push(new egret.Rectangle(440,636,207,262)),this.collideCubes.push(new egret.Rectangle(449,897,78,76)),this.collideCubes.push(new egret.Rectangle(188,-2,263,383)),this.collideCubes.push(new egret.Rectangle(446,120,207,262)),this.collideCubes.push(new egret.Rectangle(451,46,78,76))}}var t=(__define,e);t.prototype;return e.getOtherOuts=function(e,t){var s=new Array;switch(e){case"A1":s=[0];break;case"A2":s=[1];break;case"A3":s=[3];break;case"B1":s=[1,2];break;case"B2":s=[1,2];break;case"B3":s=[0,1];break;case"B4":s=[0,1];break;case"B5":s=[0,3];break;case"B6":s=[0,3];break;case"B7":s=[2,3];break;case"B8":s=[2,3];break;case"C1":s=[1,3];break;case"C2":s=[1,3];break;case"D1":s=[0,2];break;case"D2":s=[1,3];break;case"D3":s=[1,3];break;case"D4":s=[1,3];break;case"E1":s=[3];break;case"E2":s=[0,1,3];break;case"E3":s=[1,2,3];break;case"E4":s=[0,2,3];break;case"E5":s=[3];break;case"E6":s=[0,1,3];break;case"E7":s=[1,2,3];break;case"E8":s=[0,1,2]}for(var i=new Array,h=0;h<s.length;h++)s[h]!=t&&i.push(s[h]);return i},e}();egret.registerClass(MapVO,"MapVO");var ParticlePool=function(){function e(){}var t=(__define,e);t.prototype;return e.initialize=function(t,s){e.MAX_VALUE=t,e.GROWTH_VALUE=s,e.counter=t;var i=t;for(e.pool=new Array(e.MAX_VALUE);--i>-1;)e.pool[i]=new ParticleSphere},e.getParticle=function(){if(e.counter>0)return e.currentParticle=e.pool[--e.counter],e.currentParticle.init(),e.currentParticle;for(var t=e.GROWTH_VALUE;--t>-1;)e.pool.unshift(new ParticleSphere);return e.counter=e.GROWTH_VALUE,e.getParticle()},e.disposeParticle=function(t){e.pool[e.counter++]=t},e}();egret.registerClass(ParticlePool,"ParticlePool");var ParticleSphere=function(e){function t(){e.call(this),this.cacheAsBitmap=!0}__extends(t,e);var s=(__define,t),i=s.prototype;return i.init=function(){this.alpha=1,this.scaleX=1,this.scaleY=1,this.initRadius=5*Math.random()+10,this.graphics.clear(),this.graphics.beginFill(15563151),this.graphics.drawCircle(0,0,this.initRadius),this.graphics.endFill(),this.vx=6*Math.random()-3,this.vy=6*Math.random()-3,this.va=.04*Math.random()+.02},i.animate=function(){this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)},i.onEnterFrame=function(e){this.x+=this.vx,this.y+=this.vy,this.alpha-=this.va,this.scaleX=this.alpha/1,this.scaleY=this.alpha/1,this.alpha<=0&&(this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.parent.removeChild(this),ParticlePool.disposeParticle(this))},t}(egret.Shape);egret.registerClass(ParticleSphere,"ParticleSphere");var RankTest=function(){function e(e,t){this.mobileNumber=e,this.happyPoints=t}var t=(__define,e);t.prototype;return e}();egret.registerClass(RankTest,"RankTest");var RelatedMap=function(){function e(e,t){this.name=e,this.posType=t}var t=(__define,e),s=t.prototype;return s.clone=function(){return new e(this.name,this.posType)},e}();egret.registerClass(RelatedMap,"RelatedMap");var RightUpObj=function(e){function t(){e.call(this),this.starCount=new egret.BitmapText,this.addChild(this.starCount),this.starCount.font=RES.getRes("myFont_fnt"),this.starCount.textAlign=egret.HorizontalAlign.RIGHT,this.starCount.verticalAlign=egret.VerticalAlign.MIDDLE,this.starCount.width=100,this.starCount.x=-160,this.starCount.y=18,this.starCount.text="0";var t=new egret.Bitmap(RES.getRes("xuebing_json").getTexture("star_small"));this.addChild(t),t.x=-50,t.y=18,this.startBtn=new egret.Bitmap(RES.getRes("xuebing_json").getTexture("resume")),this.addChild(this.startBtn),this.startBtn.touchEnabled=!0,this.startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStartTap,this),this.startBtn.x=-this.startBtn.width/2-45,this.startBtn.y=this.startBtn.height/2+30,this.startBtn.visible=!1,this.pauseBtn=new egret.Bitmap(RES.getRes("xuebing_json").getTexture("pause")),this.addChild(this.pauseBtn),this.pauseBtn.touchEnabled=!0,this.pauseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPauseTap,this),this.pauseBtn.x=-this.pauseBtn.width/2-45,this.pauseBtn.y=this.pauseBtn.height/2+30}__extends(t,e);var s=(__define,t),i=s.prototype;return i.restart=function(){Config.starCount=0,this.updateStarCount(Config.starCount),this.startBtn.visible=!1,this.pauseBtn.visible=!0},i.updateStarCount=function(e){this.starCount.text=e.toString()},i.onStartTap=function(e){this.startBtn.visible=!1,this.pauseBtn.visible=!0,this.parent.resumeGame()},i.onPauseTap=function(e){this.startBtn.visible=!0,this.pauseBtn.visible=!1,this.parent.stopGame()},t}(egret.Sprite);egret.registerClass(RightUpObj,"RightUpObj");var RoleObj=function(e){function t(){e.call(this,RES.getRes("xuebing_json").getTexture("role")),this.angle=0,this.speed=3,this.aSpeed=.02,this.vx=0,this.vy=0,this.anchorOffsetX=62,this.anchorOffsetY=47}__extends(t,e);var s=(__define,t),i=s.prototype;return i.reset=function(){this.angle=0,this.speed=3,this.aSpeed=.02,this.vx=0,this.vy=0,this.rotation=0},i.startAutoPlay=function(){},i.stopAutoPlay=function(){},i.updateAngle=function(e,t){this.angle=e+(t?90:-90)},i.enterFrameHandler=function(e){void 0===e&&(e=null);var t=this.angle*Math.PI/180;this.speed+=this.aSpeed,this.vx=Math.sin(t)*this.speed*Config.pass,this.vy=Math.cos(t)*this.speed*Config.pass,this.x+=this.vx,this.y-=this.vy},t}(egret.Bitmap);egret.registerClass(RoleObj,"RoleObj");var StarObj=function(e){function t(){e.call(this,RES.getRes("xuebing_json").getTexture("star")),this.anchorOffsetX=58.5,this.anchorOffsetY=51.5}__extends(t,e);var s=(__define,t);s.prototype;return t}(egret.Bitmap);egret.registerClass(StarObj,"StarObj");